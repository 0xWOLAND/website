---
import 'katex/dist/katex.min.css';
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
  date: Date;
  tags?: string[];
}

const { title, description, date, tags } = Astro.props;
---
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width" />
  <title>{title}</title>
  {description && <meta name="description" content={description} />}
  <script>
    // Theme init
    const theme = localStorage.getItem('theme') || 'light';
    document.documentElement.className = theme;
  </script>
</head>
<body>
  <button class="theme-toggle">☾/☀</button>
  <article>
    <h1>{title}</h1>
    <p class="post-meta">
      {new Date(date).toLocaleDateString('en-US', {
        year: 'numeric', month: 'long', day: 'numeric'
      })}
      {tags && ' • ' + tags.map(tag => `#${tag}`).join(' ')}
    </p>
    <hr />
    <slot />
    <hr />
    <p><a href="/">← Back to posts</a></p>
  </article>
  <script>
    // Theme toggle
    document.querySelector('.theme-toggle').addEventListener('click', () => {
      const current = document.documentElement.className;
      const next = current === 'dark' ? 'light' : 'dark';
      document.documentElement.className = next;
      localStorage.setItem('theme', next);
    });
  </script>
</body>
</html>